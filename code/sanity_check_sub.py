import sys
from ml_robot.metrics import auc
import pandas as pd
IDCOL = 'MachineIdentifier'
YCOL = 'HasDetections'

name = sys.argv[1]
#base = 'backup/2019-01-25-13-03-23_cv_0.7162/sub_meta.csv.gz'
base = '../ave/ave17.csv.gz'
s = pd.read_csv(name,index_col=IDCOL)
s0 = pd.read_csv(base,index_col=IDCOL)
s0['xx'] = s[YCOL]
s0[YCOL] = s0[YCOL] > 0.5

y = s0[YCOL].values
yp = s0['xx'].values
print('auc',auc(y,yp))
